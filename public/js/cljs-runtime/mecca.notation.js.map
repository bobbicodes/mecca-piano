{"version":3,"sources":["mecca/notation.cljs"],"mappings":"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","names":["mecca.notation/brace","mecca.notation/bar-line","x","mecca.notation/bar-number","n","G__42651","js/Error","mecca.notation/beat-line","cljs.core/mod","mecca.notation/ending-bar","mecca.notation/ending-bar-repeat","mecca.notation/eighth-note-flag","y","mecca.notation/beam","mecca.notation/kill-note","p__42657","vec__42658","cljs.core.nth.cljs$core$IFn$_invoke$arity$3","mecca.notation/drum-hit","duration","mouseover?","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","p__42661","vec__42662","color","cljs.core/reset!","G__42665","re-frame.core/dispatch","cljs.core/deref","p__42666","vec__42667","mecca.notation/ledger-line","p__42670","vec__42671","mecca.notation/note","value","p__42674","vec__42675","G__42678","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","mecca.notation/drum-clef","mecca.notation/bass-clef","mecca.notation/treble-clef","mecca.notation/sharp","mecca.notation/flat","mecca.notation/c-sharp-minor","mecca.notation/staff-lines","cljs.core.doall.cljs$core$IFn$_invoke$arity$1","iter__4582__auto__","s__42680","cljs.core/LazySeq","temp__5735__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4580__auto__","size__4581__auto__","cljs.core/count","b__42682","cljs.core/chunk-buffer","i__42681","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__42679","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","cljs.core.range.cljs$core$IFn$_invoke$arity$1","cljs.core/chunk-first"],"sourcesContent":["(ns ^:figwheel-hooks mecca.notation\n  (:require\n   [reagent.core :as r]\n   [re-frame.core :as rf :refer [subscribe dispatch]]))\n\n(defn brace []\n  [:path {:transform \"translate (0.7,7.825) scale(0.6, 0.7)\"\n          :d \"M1.731 28.982H1.576v-.084-.084h-.113-.113v-.113-.113h-.113-.113v-.225-.225h-.113-.113v-.225-.225h-.113-.113v-.225-.225H.562.45V26.787 26.337H.338.225v-1.914-1.914h.113.113v-.562-.562h.113.113v-.675-.675h.113.113v-.788-.788h.113.113v-.675-.675h-.113-.113v-.562-.562h-.113-.113v-.338-.338h-.113-.113v-.113-.113H.338.225v-.225-.225H.113 0v-.225-.225h.113.113v-.113-.113h.113.113v-.225-.225h.113.113v-.225-.225h.113.113v-.562-.562h.113.113V11.255 10.58H1.013.901V9.792 9.004H.788.675V8.329 7.654H.562.45V7.09 6.528H.338.225V4.614 2.702h.113.113V2.251 1.801h.113.113v-.225-.225h.113.113v-.225-.225h.113.113v-.225-.225h.113.113V.338.225h.113.113V.113 0H1.731 1.885V.113.225H1.843 1.801v.113.113h-.113-.113v.225.225h-.113-.113v.113.113h-.113-.113v.338.338h-.113-.113v1.801 1.801h.113.113v.675.675h.113.113v.562.562h.113.113v2.026 2.026h-.113-.113v.45.45h-.113-.113v.225.225h-.113-.113v.225.225h-.113-.113v.225.225h-.113-.113v.113.113H.338.225v.113.113h.113.113v.113.113h.113.113v.225.225h.113.113v.225.225h.113.113v.225.225h.113.113v.338.338h.113.113v2.026 2.026h-.113-.113v.675.675h-.113-.113v.675.675h-.113-.113v1.801 1.801h.113.113v.225.225h.113.113v.225.225h.113.113v.225.225h.154.154v.197.197z\"}])\n\n(defn bar-line [x]\n  [:line {:transform \"translate(3.825,-0.09)\"\n          :x1 x :x2 x :y1 8 :y2 16.2 :stroke \"black\"\n          :stroke-width 0.35}])\n\n(defn bar-number [n]\n  [:path {:transform (str \"translate(\" (+ 0.3 (* 24 (dec n))) \",\" 6.3 \")\")\n          :d (case n\n               0 \"M.286.999H.143V.928.857H.071 0V.5.143H.071.143V.071 0H.286.428V.071.143H.5.571V.5.857H.5.428V.928.999ZM.286.857H.428V.5.143H.286.143v.357.357z\"\n               1 \"M.393 1.34H.106V1.245 1.149H.202.297V.765.383H.202.106V.287.191H.202.297V.096 0h.096.096v.574.574H.584.68V1.245 1.34Z\"\n               2 \"M.542 1.337H.159V1.146.956H.255.35V.86.765H.446.542V.669.573H.637.733V.382.191H.542.35V.382.573H.255.159V.382.191H.255.35V.096 0h.191.191V.096.191H.828.924V.382.573H.828.733V.669.765H.637.542V.86.956H.446.35v.096.096h.287.287v.096.096z\"\n               3 \"M6 21H3V19.5 18H1.5 0V16.5 15H1.5 3V16.5 18H6 9V15 12H6 3V10.5 9H6 9V6 3H6 3V4.5 6H1.5 0V4.5 3H1.5 3V1.5 0H6 9V1.5 3H10.5 12V6 9H10.5 9v1.5 1.5h1.5 1.5v3 3H10.5 9v1.5 1.5z\"\n               4 \"M 10.5,21 H 9 V 18 15 H 4.5 0 V 12 9 H 1.5 3 V 7.5 6 H 4.5 6 V 4.5 3 H 7.5 9 V 1.5 0 h 1.5 1.5 v 6 6 H 13.5 15 V 13.5 15 H 13.5 12 v 3 3 z M 6,12 H 9 V 9 6 H 7.5 6 V 7.5 9 H 4.5 3 v 1.5 1.5 z\"\n               5 \"M 0,15 H 1.5 3 V 16.5 18 H 6 9 V 13.5 9 H 4.5 0 V 4.5 0 h 6 6 V 1.5 3 H 7.5 3 V 4.5 6 H 6 9 V 7.5 9 H 10.5 12 V 13.5 18 H 10.5 9 V 19.5 21 H 6 3 V 19.5 18 H 1.5 0 v -1.5 z\"\n               6 \"M 6,21 H 3 V 19.5 18 H 1.5 0 V 10.5 3 H 1.5 3 V 1.5 0 H 6 9 V 1.5 3 H 10.5 12 V 4.5 6 H 10.5 9 V 4.5 3 H 6 3 v 3 3 h 3 3 v 1.5 1.5 h 1.5 1.5 v 3 3 H 10.5 9 V 19.5 21 Z M 6,18 H 9 V 15 12 H 6 3 v 3 3 z\"\n               7 \"M 4.5,21 H 3 V 18 15 H 4.5 6 V 12 9 H 7.5 9 V 6 3 H 6 3 V 4.5 6 H 1.5 0 V 3 0 h 6 6 V 4.5 9 H 10.5 9 v 3 3 H 7.5 6 v 3 3 z\"\n               8 \"M 6,21 H 3 V 19.5 18 H 1.5 0 V 15 12 H 1.5 3 V 10.5 9 H 1.5 0 V 6 3 H 1.5 3 V 1.5 0 H 6 9 V 1.5 3 H 10.5 12 V 6 9 H 10.5 9 v 1.5 1.5 h 1.5 1.5 v 3 3 H 10.5 9 V 19.5 21 Z M 6,18 H 9 V 15 12 H 6 3 v 3 3 z M 6,9 H 9 V 6 3 H 6 3 v 3 3 z\"\n               9 \"M 6,21 H 3 V 19.5 18 H 1.5 0 V 16.5 15 H 1.5 3 V 16.5 18 H 6 9 V 15 12 H 6 3 V 10.5 9 H 1.5 0 V 6 3 H 1.5 3 V 1.5 0 H 6 9 V 1.5 3 H 10.5 12 V 10.5 18 H 10.5 9 V 19.5 21 Z M 6,9 H 9 V 6 3 H 6 3 v 3 3 z\")}])\n\n(defn beat-line [x n]\n  [:g {:transform \"translate(14,0)\"}\n   (if (zero? (mod n 4))\n     [:g\n      ;[bar-number (inc (/ x 4))]\n      [:line {:x1 (* x 6) :x2 (* x 6) :y1 6 :y2 8 :stroke \"orange\"\n              :stroke-width 0.25\n              :stroke-dasharray 0.5}]]\n     [:line {:x1 (* x 6) :x2 (* x 6) :y1 6 :y2 8 :stroke \"black\"\n             :stroke-width 0.075\n             :stroke-dasharray 0.5}])])\n\n(defn ending-bar []\n  [:g {:transform \"translate(1.2,0.06)\"}\n   [:rect {:x 22.25 :y 3 :width 0.24 :height 11.25 :ry 0 :fill \"black\"}]\n   [:line {:x1 22.125 :x2 22.125 :y1 3 :y2 14.25 :stroke \"black\"\n           :stroke-width 0.1}]])\n\n(defn ending-bar-repeat []\n  [:g\n   [:rect {:x 62.5 :y 8 :width 1 :height 28 :ry 0 :fill \"black\"}]\n   [:line {:x1 61.8 :x2 61.8 :y1 8 :y2 36 :stroke \"black\"\n           :stroke-width 0.35}]\n   [:circle {:cx 60.8 :cy 11 :r 0.4}]\n   [:circle {:cx 60.8 :cy 13 :r 0.4}]\n   [:circle {:cx 60.8 :cy 23 :r 0.4}]\n   [:circle {:cx 60.8 :cy 25 :r 0.4}]\n   [:circle {:cx 60.8 :cy 33 :r 0.4}]\n   [:circle {:cx 60.8 :cy 35 :r 0.4}]])\n\n(defn eighth-note-flag [x y]\n  [:path {:transform (str \"scale(\"\n                          (if (or (< 11 y 18) (< 23 y))\n                            \"0.1)\" \"0.1,-0.1)\")\n                          \"translate(\"\n                          (if (or (< 11 y 18) (< 23 y))\n                            24 2) \",\"\n                          (if (or (< 11 y 18) (< 23 y))\n                            -61 -57) \")\")\n          :d \"M1-8v15h-1v-15h1zM1-8c0 12 12 19 12 31 0 4-1 8-2 12 0 0-1 1-1 1-1 0-2-1-1-2 2-4 2-7 2-11 0-6-6-12-10-16v-15z\"}])\n\n(defn beam []\n  [:polygon {:points \"2981,475 3499,424 3499,484 2981,535\"}])\n\n(defn kill-note []\n  [:path {:d \"M 0.75,0.3 L 1.75,-0.7 M 1.75,0.3 L 0.75,-0.7\"\n          :stroke \"red\"\n          :stroke-linecap \"round\"\n          :stroke-width 0.35}])\n\n(defn drum-hit [duration [x y]]\n  (let [mouseover? (r/atom false)]\n    (fn [color [x y]]\n      [:g {:on-mouse-over #(reset! mouseover? true)\n           :on-mouse-out #(reset! mouseover? false)\n           :on-click #(dispatch [:remove-note x y])\n           :transform (str \"translate(\" (+ 12.78 (* 6 x)) \",\" (inc y) \") \")}\n       [:path {:d \"m1.24.27 .9.74c.02.01 .04.03 .07.03 .02 0 .05-.01.08-.03l.15-.12c.02-.02.04-.06.04-.09 0-.03-.02-.06-.04-.08L1.56 0 2.43-.71c.02-.02.04-.05.04-.08 0-.03-.02-.07-.04-.09l-.15-.12c-.02-.01-.05-.03-.08-.03-.02 0-.04.01-.07.03L1.24-.27.33-1.01c-.02-.01-.04-.03-.07-.03-.02 0-.05.01-.08.03l-.15.12c-.02.02-.04.06-.04.09 0 .03.02 .06.04 .08L.91 0 .04.71c-.02.02-.04.05-.04.08 0 .03.02 .07.04 .09l.15.12c.02.01 .05.03 .08.03 .02 0 .04-.01.07-.03z\"\n               :fill \"black\"}]\n       [:rect {:x (if (< 31 y)\n                    2.2 0)\n               :y (if (< 31 y)\n                    -6.3\n                    0.8)\n               :height 5.5 :width 0.25\n               :fill \"black\"}]\n       (if @mouseover?\n         [kill-note])])))\n\n(defn ledger-line [[x y]]\n  [:rect {:transform (str \"scale (1,1) translate(\" (+ 8.875 (* 6.9 x)) \",\" (- 25.0375 y) \") \")\n          :height 0.2\n          :width 2.085\n          :ry 0.1\n          :x x :y y}])\n\n(defn note [value [x y]]\n  (let [mouseover? (r/atom false)]\n    (fn [value [x y]]\n      [:g {:on-mouse-over #(reset! mouseover? true)\n           :on-mouse-out #(reset! mouseover? false)\n           :on-click #(dispatch [:remove-note x y])\n           :transform (str \"translate(\" (+ 13 (* 6 x)) \",\" (inc y) \") \")}\n       [:path {:d \"m1.62-1.06c.41 0 .8.21 .8.67 0 .53-.41.89-.76 1.1-.27.16-.56.27-.86.27-.41 0-.8-.21-.8-.67 0-.53.41-.89.76-1.1.27-.16.56-.27.86-.27z\"\n               :fill \"black\"}]\n       [:rect {:x (if (or (< 11 y 18) (< 23 y))\n                    2.15 0.02)\n               :y (if (or (< 11 y 18) (< 23 y))\n                    -7.1 0)\n               :height 6.794 :width 0.25\n               :fill \"black\"}]\n       (if (or (= y 1)\n               (= y 3)\n               (= y 5)\n               (= y 17)\n               (= y 29))\n         [:rect {:transform \"scale (1.75,1.75)\"\n                 :height 0.2\n                 :width 2.085\n                 :ry 0.1\n                 :x -0.334 :y -0.1}]\n         (if (= value 0.5)\n           [eighth-note-flag x y]))\n       (if @mouseover?\n         [kill-note])])))\n\n(defn drum-clef []\n  [:path {:transform \"translate(3.75,31.334)\"\n          :d \"M2.5-1.3h-.7c0 0-.1 0-.1.1v3.7c0 0 0 .1.1 .1h.7c0 0 .1 0 .1-.1v-3.7c0 0 0-.1-.1-.1zM.8-1.3h-.7c0 0-.1 0-.1.1v3.7c0 0 0 .1.1 .1h.7c0 0 .1 0 .1-.1v-3.7c0 0 0-.1-.1-.1z\" :fill \"black\"}])\n\n(defn bass-clef [x y]\n  (fn []\n    [:path {:transform (str \"translate(\" x \",\" y \")\")\n            :d \"M.187 6.323H0V6.244 6.165H.094.187V6.072 5.978H.467.747v-.094-.094h.187.187v-.094-.094h.094.094v-.094-.094h.094.094v-.094-.094h.187.187v-.094-.094h.094.094v-.094-.094h.094.094v-.094-.094h.094.094v-.187-.187h.094.094v-.094-.094h.094.094v-.187-.187h.094.094V3.456 3.176h.094.094V2.428 1.681H3.083 2.989V1.308.934H2.896 2.802V.841.747H2.709 2.616V.654.56H2.523 2.428V.467.373H1.868 1.308V.467.56H1.121.934V.654.747H.841.747V.934 1.121H1.215 1.681v.094.094h.094.094v.56.56h-.094-.094v.094.094H1.121.56V2.523 2.428H.467.373V2.241 2.055H.28.187V1.681 1.308H.28.373V1.028.747H.467.56V.654.56H.654.747V.467.373H.841.934V.28.187H1.121 1.308V.094 0H1.961 2.616V.094.187h.28.28v.094.094h.094.094v.094.094h.094.094v.094.094h.094.094v.094.094h.094.094v.187.187h.094.094v.934.934h-.094-.094v.187.187h-.094-.094v.187.187h-.094-.094v.187.187h-.094-.094v.094.094h-.094-.094v.094.094h-.094-.094v.094.094h-.094-.094v.094.094h-.094-.094v.094.094h-.187-.187v.094.094h-.094-.094v.094.094h-.187-.187v.094.094H1.495 1.308v.094.094H1.121.934v.094.094H.654.373v.079.079z\n                 M4.844 1.721H4.588V1.636 1.551H4.503 4.418V1.295 1.038h.086.086V.953.868h.256.256v.086.086h.086.086V1.295 1.551h-.086-.086v.086.086z\n                 M4.801 3.289H4.548V3.205 3.12H4.463 4.378V2.867 2.613h.085.085V2.529 2.445h.252.252v.085.085h.085.085V2.867 3.12h-.085-.085v.085.085z\"}]))\n\n(defn treble-clef [x y]\n  [:path {:transform (str \"translate(\" x \",\" y \")\")\n          :d \"M2.214 12.37H1.55v-.097-.097h-.221-.221v-.111-.111h-.111-.111v-.553-.553h.111.111v-.111-.111h.111.111v-.111-.111h.332.332v.111.111h.111.111v.111.111h.111.111v.332.332h-.111-.111v.111.111h-.111-.111v.111.111h.443.443v-.111-.111h.111.111v-.996-.996h-.111-.111v-.111-.111H2.214 1.55v-.111-.111h-.221-.221v-.111-.111h-.111-.111v-.111-.111h-.111-.111v-.111-.111h-.111-.111v-.111-.111H.332.221v-.221-.221H.111 0v-.996-.996h.111.111v-.221-.221h.111.111v-.221-.221h.111.111v-.111-.111h.111.111v-.111-.111h.111.111v-.111-.111h.111.111v-.111-.111h.111.111v-.111-.111h.111.111V3.653 3.321H1.66 1.55V2.324 1.328h.111.111V.996.664h.111.111V.443.221h.111.111V.111 0h.332.332v.111.111h.111.111v.221.221h.111.111v.332.332h.111.111v.664.664h-.111-.111v.443.443h-.111-.111v.221.221h-.111-.111v.221.221h-.111-.111v.111.111h-.111-.111v.553.553h.111.111v.111.111h.443.443v.111.111h.111.111v.111.111h.111.111v.111.111h.111.111v.221.221h.069.069v.664.664h-.069-.069v.221.221h-.111-.111v.111.111h-.111-.111v.111.111h-.221-.221v.443.443h.111.111v.775.775h-.111-.111v.221.221h-.221-.221v.097.097zM1.992 9.077h.664v-.553-.553h-.111-.111v-.553-.553h-.111-.111v.111.111h-.111-.111v.111.111h-.111-.111v.332.332h.111.111v.221.221h.221.221v.111.111H2.103 1.771v-.111-.111h-.111-.111v-.111-.111h-.111-.111v-.221-.221h-.111-.111v-.332-.332h.111.111v-.221-.221h.111.111v-.111-.111h.111.111v-.111-.111h.111.111v-.111-.111h.111.111v-.111-.111h-.111-.111v-.332-.332h-.111-.111v.111.111h-.111-.111v.111.111h-.111-.111v.111.111h-.111-.111v.221.221h-.111-.111v.111.111h-.111-.111v.332.332h-.111-.111v.332.332h.111.111v.332.332h.111.111v.111.111h.111.111v.111.111h.111.111v.111.111zm1.328-.221h.221v-.221-.221h.111.111v-.443-.443h-.111-.111v-.221-.221h-.221-.221v-.111-.111h-.111-.111v.553.553h.111.111v.443.443zM2.214 3.321h.221v-.221-.221h.111.111v-.111-.111h.111.111v-.221-.221h.111.111V1.66 1.107H2.767 2.435v.221.221h-.111-.111v.221.221h-.111-.111v.664.664z\"}])\n\n(defn sharp [x y]\n  [:path {:transform (str \"translate(\" x \",\" (+ 0.5 y) \")\") :d \"M.18.04V-.91l.4-.11v.95zM.98-.19.7-.11V-1.05l.28-.08v-.39l-.28.08V-2.42h-.11v1l-.4.12V-2.24h-.11v.98l-.28.08v.39l.28-.08v.95l-.28.08V.55L.08.47v.96h.11V.43l.4-.11v.94h.11V.29L.98.21Z\"}])\n\n(defn flat [x y]\n  [:path {:d \"m .94 1.62s-.06-1.2-.06-2c0-.32.02-.56.04-.64.08-.24.6-.68.88-.84.18-.1.36-.14.52-.14.2 0 .38.08.5.22.2.22.32.56.32.94 0 .36-.1.78-.34 1.2-.26.48-.84 1.12-1.44 1.5-.08.04-.14.06-.2.06-.18 0-.22-.2-.22-.3m-.7 1.78c.06.08.12.1.18.1s.12-.04.12-.04c.6-.34 1.08-.88 1.58-1.22 1.78-1.24 2.4-2.46 2.4-3.38 0-1.14-.88-1.86-1.8-1.92-.14 0-.28.02-.42.06-.22.06-.46.14-.68.28-.12.1-.34.28-.44.28-.04 0-.06 0-.1-.02-.14-.06-.22-.2-.22-.34.02-.44.14-5.24.14-5.64 0-.22-.18-.34-.38-.34-.28 0-.6.2-.62.56 0 0 .08 11.42.24 11.62\"}])\n\n(defn c-sharp-minor []\n  [:g [sharp 6.6 8]\n   [sharp 7.4 11]\n   [sharp 8.2 7]\n   [sharp 9 10]\n   [sharp 9.8 13]\n   [sharp 10.6 9]\n   [sharp 11.4 12]])\n\n(defn staff-lines []\n  [:g#lines\n   (doall\n     (for [y (range 37)]\n       ^{:key y}\n       [:line {:x1 7 :x2 61.25 :y1 (+ 4 y) :y2 (+ 4 y)\n               :stroke \"black\"\n               :stroke-width 0.15\n               :visibility \"visible\"}]))])"]}