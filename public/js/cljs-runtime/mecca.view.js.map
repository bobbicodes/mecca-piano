{"version":3,"sources":["mecca/view.cljs"],"mappings":"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","names":["mecca.view/note-guides","editor-x","G__29787","re-frame.core/subscribe","cljs.core.into","iter__5523__auto__","s__29789","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__29791","cljs.core/chunk-buffer","i__29790","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__29788","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","beat","cljs.core.range","cljs.core._EQ_","cljs.core/mod","cljs.core/deref","mecca.view/note-targets","instrument","G__29792","focused","G__29793","G__29794","sharp?","G__29795","s__29797","xs__6360__auto__","iterys__5519__auto__","s__29799","b__29801","i__29800","iter__29798","fs__5520__auto__","cljs.core.concat","iter__29796","time","pitch","cljs.core/not","and__5043__auto__","G__29808","G__29815","re-frame.core/dispatch","G__29802","G__29809","pitches","G__29803","G__29810","mecca.music/play-sample","G__29804","G__29811","cljs.core.get","G__29805","G__29812","G__29806","G__29813","G__29807","G__29814","mecca.view/note-cursor","G__29816","G__29817","G__29818","x","y","cljs.core/last","mecca.editor.svg_paths","G__29819","mecca.editor/eraser-cursor","G__29820","mecca.editor/repeat-sign","mecca.editor/triforce","mecca.view/score-notes","notes","G__29821","G__29822","s__29824","b__29826","i__29825","map__29827","cljs.core/--destructure-map","iter__29823","map__29828","pitch-map","cljs.core/zipmap","or__5045__auto__","mecca.view/editor","G__29829","G__29830","current-position","G__29831","G__29832","play-start","G__29833","mario-run","G__29834","mario-jump","G__29835","G__29836","G__29837","mecca.megaman/cloud1","mecca.megaman/airman","mecca.megaman/roll","mecca.editor/block","mecca.megaman/tile","mecca.notation/staff-lines","mecca.editor/retract-editor","mecca.editor/piano","mecca.editor/advance-editor","G__29838","G__29839","mecca.view/debug-info","G__29841","mecca.music/audiocontext","G__29843","s__29845","b__29847","i__29846","iter__29844","note","G__29848","cljs.core.pr_str","G__29850","mouse-pos","G__29851","G__29853","G__29855","G__29857","mecca.view/mecca","mecca.transport/transport","mecca.editor/toolbar","cljs.core/chunk-first"],"sourcesContent":["(ns ^:figwheel-hooks mecca.view\r\n  (:require [mecca.music :as music :refer [audiocontext]]\r\n            [mecca.subs :as subs]\r\n            [reagent.core :as r]\r\n            [re-frame.core :as rf :refer [subscribe dispatch]]\r\n            [mecca.events :as events]\r\n            [mecca.notation :as notation]\r\n            [mecca.transport :as transport]\r\n            [mecca.editor :as editor :refer [svg-paths]]\r\n            [mecca.megaman :as megaman]))\r\n\r\n(defn note-guides []\r\n  (let [editor-x (subscribe [:editor-beat-start])]\r\n    (fn []\r\n      (into [:g]\r\n            (for [beat (range 0 9 0.5)]\r\n              (if (= 0\r\n                     (mod (+ (dec @editor-x) beat) 4))\r\n                [:g\r\n                 [:line {:x1 (+ 7 (* 6 beat)) :x2 (+ 7 (* 6 beat))\r\n                         :y1 6 :y2 31 :stroke \"orange\"\r\n                         :stroke-width 0.25\r\n                         :stroke-dasharray 0.5}]]\r\n                [:line {:x1 (+ 7 (* 6 beat)) :x2 (+ 7 (* 6 beat))\r\n                        :y1 6 :y2 31 :stroke \"black\"\r\n                        :stroke-width 0.075\r\n                        :stroke-dasharray 0.5}]))))))\r\n\r\n\r\n(defn note-targets []\r\n  (let [instrument (subscribe [:instrument])\r\n        focused (subscribe [:focused-note-pos])\r\n        editor-x (subscribe [:editor-beat-start])\r\n        sharp? (subscribe [:sharp?])]\r\n    (fn []\r\n      (into [:g]\r\n            (for [time (range 0 9 0.5)\r\n                  pitch (range 36)]\r\n              ^{:key [time pitch]}\r\n              [:rect {:transform \"translate(7,5)\"\r\n                      :x (* 6 time)\r\n                      :y (- pitch 1)\r\n                      :height 1 :width 3\r\n                      :stroke \"black\"\r\n                      :stroke-width 0.2\r\n                      :fill (if (= [time pitch] @focused) \"magenta\" \"gray\")\r\n                      :visibility \"visible\"\r\n                      :opacity (if (= [time pitch] @focused) 1 0.2)\r\n                      :pointer-events \"all\"\r\n                      :on-mouse-over #(if-not (and \r\n                                               @sharp?\r\n                                               (or (= pitch 12)\r\n                                                   (= pitch 15)\r\n                                                   (= pitch 8)\r\n                                                   (= pitch 5)\r\n                                                   (= pitch 1)\r\n                                                   (= pitch 0)))\r\n                                        (dispatch [:update-focus-note [time pitch]]))\r\n                      :on-mouse-out #(dispatch [:update-focus-note [nil nil]])\r\n                      :on-click (let [pitches [84 83 81 79 77 76 74 72 71 69 67 65 64 62 60 59 57 55]]\r\n                                  (cond\r\n                                    @(subscribe [:eraser?])\r\n                                    #(do (music/play-sample 18 63)\r\n                                       (dispatch [:remove-note (+ time (dec @editor-x))\r\n                                                  (get pitches pitch)]))\r\n                                    @(subscribe [:repeat?])\r\n                                    #(dispatch [:set-loop-end time])\r\n                                    :else\r\n                                    #(dispatch [:add-note @instrument\r\n                                                (+ time (dec @editor-x))\r\n                                                (get pitches pitch)])))}])))))\r\n\r\n(defn note-cursor []\r\n  (let [focused (subscribe [:focused-note-pos])\r\n        instrument (subscribe [:instrument])\r\n        sharp? (subscribe [:sharp?])]\r\n       (when-not (= @focused [nil nil])\r\n         (let [x (first @focused) y (last @focused)]\r\n           [:g\r\n            (if @sharp? (svg-paths [[\"black\" \"M15 46C15 47 14 47 13 47 13 47 12 47 12 46V37L7 39V49C7 49 6 50 6 50 5 50 5 49 5 49V40L3 40C3 40 2 40 2 40 2 40 1 40 1 39V35C1 35 1 34 2 34L5 33V23L3 24C3 24 2 24 2 24 2 24 1 23 1 23V19C1 19 1 18 2 18L5 17V7C5 6 5 6 6 6 6 6 7 6 7 7V16L12 14V4C12 4 13 3 13 3 14 3 15 4 15 4V13L17 13C17 12 17 12 17 12 18 12 18 13 18 14V17C18 18 18 18 17 19L15 20V30L17 29C17 29 17 29 17 29 18 29 18 29 18 30V34C18 34 18 35 17 35L15 36V46ZM7 22V32L12 31V21Z\"]]\r\n                                   (+ 68 (* 86 x)) (+ 18 (* 15 y)) 0.07))\r\n            (cond\r\n              @(subscribe [:eraser?])\r\n              [editor/eraser-cursor (+ 36 (* 30 x)) (+ (* 5 y) 20) 0.2]\r\n              @(subscribe [:repeat?])\r\n              [editor/repeat-sign (+ 7 (* 6 x)) 8 0.13]\r\n              :else\r\n              [editor/triforce (+ 32 (* 60 x)) (+ (* 10 y) 15) 0.2])]))))\r\n\r\n(defn score-notes []\r\n   (let [notes (subscribe [:notes])\r\n         editor-x (subscribe [:editor-beat-start])]\r\n     (into [:g]\r\n           (for [{:keys [time instrument pitch]} @notes\r\n                 :when (<= (dec @editor-x) time (+ 16 (dec @editor-x)))]\r\n                    ^{:key [instrument time pitch]}\r\n                    (let [x (- time (dec @editor-x))\r\n                          pitch-map (zipmap [84 83 81 79 77 76 74 72 71 69 67 65 64 62 60 59 57 55]\r\n                                            (range 18))]\r\n                      [:g\r\n                       (if-not (get pitch-map pitch)\r\n                        (svg-paths [[\"black\" \"M15 46C15 47 14 47 13 47 13 47 12 47 12 46V37L7 39V49C7 49 6 50 6 50 5 50 5 49 5 49V40L3 40C3 40 2 40 2 40 2 40 1 40 1 39V35C1 35 1 34 2 34L5 33V23L3 24C3 24 2 24 2 24 2 24 1 23 1 23V19C1 19 1 18 2 18L5 17V7C5 6 5 6 6 6 6 6 7 6 7 7V16L12 14V4C12 4 13 3 13 3 14 3 15 4 15 4V13L17 13C17 12 17 12 17 12 18 12 18 13 18 14V17C18 18 18 18 17 19L15 20V30L17 29C17 29 17 29 17 29 18 29 18 29 18 30V34C18 34 18 35 17 35L15 36V46ZM7 22V32L12 31V21Z\"]]\r\n                                   (+ 68 (* 86 x)) (+ 18 (* 15 (get pitch-map (dec pitch)))) 0.07))\r\n                      [editor/triforce (+ 2 (* 30 x)) (+ (* 5 (or (get pitch-map pitch) (get pitch-map (dec pitch)))) 9) 0.2]])))))\r\n\r\n(defn editor []\r\n  (let [notes (subscribe [:notes])\r\n        focused (subscribe [:focused-note-pos])\r\n        current-position (subscribe [:current-position])\r\n        editor-x (subscribe [:editor-beat-start])\r\n        play-start (subscribe [:play-start])\r\n        mario-run (subscribe [:mario-run])\r\n        mario-jump (subscribe [:mario-jump])\r\n        instrument (subscribe [:instrument])]\r\n    (fn []\r\n      (if (= 20 @mario-run)\r\n        (dispatch [:jump-reset]))\r\n      [:svg {:width \"100%\"\r\n             :view-box \"0 0 64 54\"}\r\n       (svg-paths megaman/cloud1 -64 0 0.15)\r\n       (svg-paths megaman/cloud1 128 0 0.15)\r\n       (svg-paths megaman/airman 150 1 0.2)\r\n       ;(svg-paths megaman/megaman1 0 48 0.2)\r\n       (svg-paths megaman/roll 20 48 0.2)\r\n       [:g [editor/block 28 30]\r\n        [editor/triforce 30.47 0.88 0.072]]\r\n       (svg-paths megaman/tile -8 71 0.2)\r\n       [:g.staff {:transform \"translate(0,13.5) scale(1)\"\r\n                  :style {:cursor \"url(/images/hand.png),crosshair\"}}\r\n        [notation/staff-lines]\r\n        [editor/retract-editor 2]\r\n         (svg-paths editor/piano 0 30 \"0.12,0.2\")\r\n        [editor/advance-editor]\r\n        [note-targets]\r\n        [note-guides]\r\n        ;[note-cursor]\r\n        [score-notes]\r\n        (if @(subscribe [:loop-end])\r\n          [editor/repeat-sign (+ 7 (* 6 @(subscribe [:loop-end]))) 8 0.13])]])))\r\n\r\n(defn debug-info []\r\n  [:div\r\n    [:p (str \"Play start: \" @(subscribe [:play-start]))]\r\n   [:p (str \"Song time: \" \r\n (- (.-currentTime @audiocontext) @(subscribe [:play-start])))]\r\n[:p \"Song data: \"]\r\n(into [:p]\r\n  (for [note @(subscribe [:notes])]\r\n    (pr-str note)))\r\n   ;[:p (str \"Mario run: \" @(subscribe [:mario-run]))]\r\n   [:p (str \"Mario run: \" @(subscribe [:mario-run]))]\r\n   [:p \r\n    (let [mouse-pos (subscribe [:focused-note-pos])]\r\n      (str \"Beat: \" (first @mouse-pos) \" Pitch: \" (last @mouse-pos)))]\r\n   [:p (str \"Tempo: \" @(subscribe [:tempo]))]\r\n   [:p (str \"Current position: \" @(subscribe [:current-position]))]\r\n   [:p (str \"Editor beat start: \" @(subscribe [:editor-beat-start]))]])\r\n\r\n(defn mecca []\r\n  [:div\r\n   [editor]\r\n   [transport/transport 140 0 0.5]\r\n   [editor/toolbar 71 0]\r\n   #_[:div\r\n    [:label {:for \"edn\"} \"Load song data:\"\r\n     [:p]\r\n     [:form\r\n      {:on-submit\r\n       (fn [e]\r\n         (.preventDefault e)\r\n         (dispatch [:set-notes (read-string (.. e -target -elements -edn -value))]))}\r\n      [:textarea {:id \"edn\" :name \"edn\"\r\n                  :rows 8 :cols 38}]\r\n      [:p]\r\n      [:input {:type \"submit\" :value \"Import\"}]]]]\r\n   [debug-info]\r\n   #_[:svg\r\n    (svg-paths [[\"#000000\" \"M0 0h14M0 1h1M13 1h1M0 2h1M4 2h1M13 2h1M0 3h1M3 3h2M13 3h1M0 4h1M2 4h1M4 4h1M9 4h1M13 4h1M0 5h1M2 5h4M8 5h1M13 5h1M0 6h1M4 6h1M7 6h1M13 6h1M0 7h1M6 7h1M9 7h1M13 7h1M0 8h1M5 8h1M8 8h2M13 8h1M0 9h1M4 9h1M7 9h1M9 9h1M13 9h1M0 10h1M7 10h4M13 10h1M0 11h1M9 11h1M13 11h1M0 12h1M13 12h1M0 13h1M13 13h1M0 14h14\"]\r\n                [\"#d6944a\" \"M1 1h1M12 1h1M1 13h1\"]\r\n                [\"#ffffff\" \"M2 1h10M1 2h1M1 3h1M1 4h1M1 5h1M1 6h1M1 7h1M1 8h1M1 9h1M1 10h1M1 11h1M1 12h1\"]\r\n                [\"#ffff00\" \"M2 2h2M5 2h7M2 3h1M5 3h7M3 4h1M5 4h4M10 4h2M6 5h2M9 5h3M2 6h2M5 6h2M8 6h4M2 7h4M7 7h2M10 7h2M2 8h3M6 8h2M10 8h2M2 9h2M5 9h2M8 9h1M10 9h2M2 10h5M11 10h1M2 11h7M10 11h2M2 12h10\"]\r\n                [\"#b54a00\" \"M12 2h1M12 3h1M12 4h1M12 5h1M12 6h1M12 7h1M12 8h1M12 9h1M12 10h1M12 11h1M12 12h1M2 13h11\"]]\r\n               0 0 5)]])\r\n"]}